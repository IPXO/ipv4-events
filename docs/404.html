<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ipv4.events — 404</title>
  <meta name="robots" content="noindex,follow"/>

  <!-- BSOD styles -->
  <link rel="stylesheet" href="css/404.css">

  <!-- Selective SPA fallback: only rewrite STRICTLY valid SPA routes to /?p=... -->
  <script>
    (function () {
      function isValidDecade(s){ return /^(1950s|1960s|1970s|1980s|1990s|2000s|2010s|2020s)$/.test(s); }
      function isValidSpaPathname(pathname){
        var segs = String(pathname).replace(/^\/+|\/+$/g,'').split('/');
        if (!segs[0]) return false;
        if (segs[0] === 'category'){
          // valid: /category/<slug> OR /category/<slug>/decade/<decade>
          if (segs.length === 2 && segs[1]) return true;
          if (segs.length === 4 && segs[1] && segs[2] === 'decade' && isValidDecade(segs[3])) return true;
          return false;
        }
        if (segs[0] === 'decade'){
          return (segs.length === 2 && isValidDecade(segs[1]));
        }
        if (segs[0] === 'search'){
          return (segs.length === 2 && !!segs[1]);
        }
        return false;
      }

      var l = window.location;

      // If it looks like a file (e.g., .css, .js, .png), do NOT rewrite; show BSOD 404
      var looksLikeFile = /\.[a-z0-9]+($|\?)/i.test(l.pathname);
      // Static folders: if missing, show BSOD 404
      var STATIC_DIR = /^\/(icons|css|js|data|assets)\//;

      var shouldRewrite =
        !/[?&]p=/.test(l.search) &&
        !looksLikeFile &&
        !STATIC_DIR.test(l.pathname) &&
        isValidSpaPathname(l.pathname);

      if (shouldRewrite) {
        l.replace(l.protocol + '//' + l.host + '/?p=' +
                  encodeURIComponent(l.pathname + l.search + l.hash));
      }
      // else: leave as-is to show the BSOD 404
    })();
  </script>
</head>
<body>
  <main class="bsod" role="main" aria-labelledby="bsod-title">
    <div class="bsod-inner">
      <h1 id="bsod-title">PAGE NOT FOUND</h1>

      <p>
        A fatal exception <span id="code">0E</span> has occurred at
        <span id="addr">0028:C0005338</span> in <span id="mod">VXD IPV4_EVENTS(01)</span>.
        The current page could not be found <span class="dim">(HTTP 404)</span>.
      </p>

      <p>
        * The page you are looking for might have been removed, had its name changed, or is temporarily unavailable.
      </p>

      <p>
        * Press any key to return to the <a class="link" href="/">homepage</a>.<br>
        * Press <span class="key">CTRL</span>+<span class="key">ALT</span>+<span class="key">DEL</span> to restart your browser
        <span class="dim">(not actually necessary)</span>.
      </p>

      <p class="hint">
        Auto-reboot in <span id="secs">10</span> seconds<span class="cursor" aria-hidden="true">█</span>
      </p>
    </div>
  </main>

  <script src="js/404.js" defer></script>
</body>
</html>