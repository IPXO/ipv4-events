/* ===== Links (retro colors) ===== */
a {
  color: #0000EE;                 /* classic blue */
  text-decoration: none;
  cursor: pointer;
}
a:visited { color: #551A8B; }     /* classic purple visited */
a:hover,
a:focus {
  color: #FF0000;                 /* red on hover/focus */
  text-decoration: underline;
}
a:active { color: #CC0000; }

/* ===== Theme tokens ===== */
:root{
  --desk:#008080;
  --win:#c0c0c0;
  --br:#808080;
  --txt:#000;
  --shadow-in: inset -2px -2px 0 #fff, inset 2px 2px 0 #808080;
  --chip:#e9e9e9;
}

/* ===== Base layout ===== */
*{ box-sizing:border-box }
html { -webkit-text-size-adjust: 100%; }                 /* stop iOS auto-zooming text */
* { -webkit-tap-highlight-color: rgba(0,0,0,0.15); }     /* nicer tap feedback */

body{
  margin:0;
  background:var(--desk);
  color:var(--txt);
  font-family:Tahoma, Segoe UI, Arial, sans-serif;
}

.container{ max-width:1220px; margin:0 auto; padding:0 14px }
.panel{ background:var(--win); border:4px solid var(--br); box-shadow:var(--shadow-in) }

header.top{
  position:sticky; top:0; z-index:5;
  background:var(--win);
  border-bottom:4px solid var(--br);
  box-shadow:var(--shadow-in)
}
.top-inner{ display:flex; gap:10px; align-items:center; justify-content:space-between; padding:10px 14px }
.brand{ display:flex; gap:8px; align-items:center; font-weight:700 }
img.icon{ width:18px; height:18px; image-rendering:pixelated }

.controls{ display:flex; flex-wrap:wrap; gap:8px }
.input,.select{ border:2px solid #000; background:#fff; padding:7px 10px; font-size:14px }
.input{ min-width:260px }

main{ padding:16px 0 }
.hero{ padding:14px; margin-bottom:16px }
.hero h2{ margin:0 0 6px; font-size:18px; display:flex; gap:8px; align-items:center }
.muted{ opacity:.9; font-size:13px }

/* Space between sticky header and hero */
header.top + main { margin-top: 12px; }

/* Grid of years */
.catbar{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px }
.grid{ display:grid; grid-template-columns:1fr; gap:14px; margin:18px 0 60px }
@media(min-width:980px){ .grid{ grid-template-columns:1fr 1fr } }
@media(min-width:1200px){ .grid{ grid-template-columns:1fr 1fr 1fr } }

.year-card{ overflow:hidden }
.year-head{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:4px solid var(--br); background:#d6d6d6 }
.year-title{ display:flex; gap:8px; align-items:center; font-weight:700 }
.event-list{ list-style:none; margin:0; padding:10px 12px; display:flex; flex-direction:column; gap:10px }
.event{ display:grid; grid-template-columns:20px auto; gap:8px }
.event-title{ font-weight:700 }
.chip-row{ display:flex; flex-wrap:wrap; gap:6px; margin-top:4px }
.chip{ background:var(--chip); border:1px solid #000; padding:1px 6px; font-size:11px; display:inline-flex; align-items:center; gap:4px; cursor:pointer }

footer{ margin:26px 0 80px; padding:14px }

/* ===== Loader ===== */
#loader {
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0,0,0,.15); z-index: 9999;
}
#loader .win { background: var(--win); border: 4px solid var(--br); box-shadow: var(--shadow-in); width: 360px; padding: 12px; }
#loader .title { display:flex; align-items:center; gap:8px; font-weight:700; margin-bottom:8px }
#loader .bar { height: 18px; border: 2px solid #000; background:#fff; box-shadow: inset -2px -2px 0 #fff, inset 2px 2px 0 #808080; }
#loader .fill { height: 100%; width: 0%; background: #0a66; }
#loader .foot { display:flex; justify-content:space-between; margin-top:8px; font-size:12px; opacity:.9 }

/* ===== Form control resets (consistent across Safari/Firefox/Edge) ===== */
.input, .select {
  -webkit-appearance: none; -moz-appearance: none; appearance: none;
  border-radius: 0;
  font: inherit;           /* avoid iOS system UI font */
  color: inherit;
}
.select::-ms-expand { display: none; }
.select{
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'><path d='M0 0 L5 6 L10 0 Z' fill='black'/></svg>");
  background-repeat:no-repeat; background-position:right 8px center; padding-right:28px;
  color:#000; /* stop iOS from making it blue */
}

/* Prevent zoom-on-focus on iOS when inputs are <16px */
@media (max-width: 480px) {
  .controls .input,
  .controls .select { font-size:16px; }
}

/* ===== Category pills (buttons/links) ===== */
.cat-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:#fff;
  border:2px solid #000;
  padding:5px 8px;
  line-height:1;              /* uniform height on iOS */
  white-space:nowrap;
  -webkit-appearance:none;
  appearance:none;
  border-radius:0;
  color:#000;                 /* ensure text isn’t iOS-blue */
  text-decoration:none;       /* in case they’re anchors */
}

/* Hover/focus highlight (subtle retro cue) */
.cat-pill:hover,
.cat-pill:focus{
  background:#e0e0e0;         /* light gray highlight */
  outline:2px solid #000;     /* clear focus ring for keyboard users */
  outline-offset:0;           /* keeps retro look */
}

/* Pressed effect (while clicking or active state) */
.cat-pill:active{
  background:#d0d0d0;
  box-shadow: inset 2px 2px 0 #808080, inset -2px -2px 0 #fff;
}

/* Keep icons aligned inside pills */
.cat-pill .icon{ vertical-align:middle }

/* ===== Utility ===== */
.sr-only{
  position:absolute!important; width:1px!important; height:1px!important; padding:0!important; margin:-1px!important;
  overflow:hidden!important; clip:rect(0,0,0,0)!important; white-space:nowrap!important; border:0!important;
}
/* --- iPhone Safari: header dropdowns overflow fix --- */

/* Let flex children actually shrink in Safari */
.top-inner,
.controls { min-width: 0; }
.controls > * { min-width: 0; }

/* Make form controls shrink and not overflow */
.controls .input,
.controls .select {
  max-width: 100%;
  width: 100%;           /* full width on small screens */
  box-sizing: border-box;
  font-size: 16px;       /* prevents iOS zoom-on-focus */
  line-height: 1.1;      /* keeps height consistent */
}

/* On wider screens, restore a more compact layout */
@media (min-width: 700px) {
  .controls {
    display: grid;
    grid-template-columns: 1fr 220px 180px; /* search | category | decade */
    gap: 8px;
  }
  .controls .input { width: 100%; }
  .controls .select { width: auto; }
}

/* Keep the retro look + kill Safari’s native styling */
.select {
  -webkit-appearance: none;
  appearance: none;
  background-repeat: no-repeat;
  background-position: right 8px center;
  padding-right: 28px;      /* room for arrow */
  color: #000;              /* avoid iOS blue text */
}

/* Make the custom arrow a bit further in so it doesn't clip */
@supports (-webkit-touch-callout: none) {
  .select { background-position: right 10px center; }
}

/* The brand line can wrap without pushing controls off-screen */
.brand { flex: 0 0 auto; }
.controls { flex: 1 1 auto; }